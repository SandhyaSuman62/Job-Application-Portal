<div class="row sectionBlockLayout text-start"
  style="display: flex; flex-wrap: wrap; margin: 0px; min-height: auto; padding: 8px;">
  <div class="container" style="padding: 0px; display: flex; flex-wrap: wrap;">
    <div class="col-lg-12 columnBlockLayout"
      style="flex-grow: 1; display: flex; flex-direction: column; min-width: 300px;">{% include 'entity_list' key:'Active Job Applications' AISummaryTitle: 'AI Insights' isAISummaryExpanded: 'true' AISummaryChartTypes:'[1,2,3,4,5]' isAISummaryEnabled: 'false' isNLSearchEnabled: 'false'%}</div>
  </div>
</div>


<script>
  document.addEventListener("DOMContentLoaded", function () {
    const userAccess = "{{ user.roles | json }}";

    if (userAccess.includes("Portal AdministratorAuthenticated Users")) {
      const waitForToolbar = setInterval(() => {
        const toolbar = document.querySelector(".float-end.toolbar-actions");
        if (toolbar) {
          toolbar.style.display = "none";
        }
        clearInterval(waitForToolbar);
      }, 200);
    }

    if (!userAccess.includes("Portal AdministratorAuthenticated Users")) {
      const waitForToolbar = setInterval(() => {
        const editLinks = document.querySelectorAll(".edit-link");
        if (editLinks.length > 0) {
          editLinks.forEach(link => {
            link.style.display = "none";
          });
          clearInterval(waitForToolbar);
        }
      }, 200);
    }


    $(document).on("click", ".details-link", function (e) {

      if (userAccess.includes("Portal AdministratorAuthenticated Users")) {
        window.location.href = "/View-Job-Application"; // Page A
      }
      // else {
      //   window.location.href = "/View-Application"; // Page B
      // }
    });

  });
</script>